{"version":3,"sources":["image.js"],"names":["multer","require","path","diskStorage","destination","req","file","cb","Date","now","originalname","upload","storage","fileFilter","mimetype","Error","size","router","post","single","res","status","filename","send","module","exports"],"mappings":"aAAA,IAAMA,OAASC,QAAQ,UACjBC,KAAOD,QAAQ,QAAfC,QAAOD,OAAQE,YAErB,CAEEC,YAAa,SAAUC,EAAKC,EAAMC,GAChCA,EAAG,KAAM,aADXH,SAAAA,SAAaC,EAAAC,EAAAC,GACXA,EAAG,KAAMC,KAAAC,MAAT,IAAAH,EAAAI,iBAOJC,OAAAX,OAAA,CAEEY,QAASA,QADXC,WAAeb,SAAOK,EAAAC,EAAAC,GACpBK,MADoB,eACpBA,EAASA,UADW,cAAAN,EAAAQ,SAEVP,EAAE,IAAAQ,MAAA,uBAEMA,IAAdT,EAAOC,KACRA,EAAA,IAAAQ,MAAA,iCACDR,EAAA,MAASS,MAIVC,OAAAC,KAAA,UAAAP,OAAAQ,OAAA,SAAA,SAAAd,EAAAe,GAVHf,EAAAC,KAgBMc,EAAIC,KAAJD,+BAAAA,OAAAf,EAAAC,KAAAgB,WAFAF,EAACF,OAAK,KAAZK,KAAuBZ,uBAAvBa,OAAAC,QAAAR,OAUAO,OAAOC,QAAUd","file":"image.min.js","sourcesContent":["const multer = require('multer');\r\nconst path = require('path');\r\n\r\n// Set up multer storage\r\nconst storage = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, 'uploads/');\r\n  },\r\n  filename: function (req, file, cb) {\r\n    cb(null, Date.now() + '-' + file.originalname);\r\n  }\r\n});\r\n\r\n// Set up multer upload object\r\nconst upload = multer({\r\n  storage: storage,\r\n  fileFilter: function (req, file, cb) {\r\n    if (file.mimetype !== 'image/jpeg' && file.mimetype !== 'image/png') {\r\n      return cb(new Error('Invalid file type.'));\r\n    }\r\n    if (file.size > 5000000) {\r\n      return cb(new Error('File size is too large.'));\r\n    }\r\n    cb(null, true);\r\n  }\r\n});\r\n\r\n\r\nrouter.post('/upload', upload.single('image'), (req, res) => {\r\n    if (!req.file) {\r\n      res.status(400).send('No file uploaded.');\r\n    } else {\r\n      res.send(`File uploaded successfully: ${req.file.filename}`);\r\n    }\r\n  });\r\n  \r\n  module.exports = router;\r\n  \r\nmodule.exports = upload;\r\n"]}
"use strict";var express=require("express"),_require=require("./validation"),validateName=_require.validateName,validateEmail=_require.validateEmail,router=express.Router(),db=require("./database.js"),_require2=require("express-validator"),check=_require2.check,validateUser=require("./validation"),multer=require("multer");router.get("/",function(e,r,t){db.User.find().exec().then(function(e){r.send(e)}).catch(function(e){r.send(JSON.parse(JSON.stringify(e)))})}),router.get("/:id/",function(e,t,r){db.User.findOne({_id:e.params.id}).exec(function(e,r){t.send(r)})}),router.post("",function(r,t){var n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new db.User(r.body),e.next=4,regeneratorRuntime.awrap(n.save());case 4:s=e.sent,t.status(201).json(s),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t.status(500).json({error:"Server error"});case 12:case"end":return e.stop()}},null,null,[[0,8]])}),router.put("/update",function(e,r,t){var n={name:e.body.name,ratings:e.body.rating,cast:e.body.cast,releaseDate:e.body.releaseDate,description:e.body.description,duration:e.body.duration};db.User.findOneAndUpdate({_id:e.body.id},{$set:n},{returnNewDocument:!0})}),router.delete("/:id",function(r,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(db.User.deleteOne({_id:r.params.id}));case 3:0===e.sent.deletedCount?t.status(404).json({error:"User not found"}):t.status(200).json({message:"User deleted successfully"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t.status(500).json({error:"Server error"});case 11:case"end":return e.stop()}},null,null,[[0,7]])}),module.exports=router;
//# sourceMappingURL=user.min.js.map
